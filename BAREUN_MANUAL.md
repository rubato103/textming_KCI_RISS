# Bareun 한국어 형태소 분석기 사용 매뉴얼

한국어 형태소 분석 프로젝트에서 Bareun API를 활용한 텍스트 분석 시스템 완벽 가이드

---

## 📋 목차

1. [시스템 개요](#시스템-개요)
2. [사전 준비사항](#사전-준비사항)  
3. [스크립트별 사용 가이드](#스크립트별-사용-가이드)
4. [필수 준수사항](#필수-준수사항)
5. [오류 해결 가이드](#오류-해결-가이드)
6. [FAQ](#faq)

---

## 🎯 시스템 개요

### 주요 스크립트 구성
| 스크립트 | 기능 | 난이도 |
|---------|------|---------|
| `00.bareun_dict_manager.R` | 사전 관리 시스템 | ⭐⭐ |
| `02_morpheme_analysis.R` | 전체 텍스트 형태소 분석 | ⭐⭐⭐ |  
| `03-1_register_user_dict_auto.R` | 사용자 사전 자동 등록 | ⭐⭐⭐⭐ |

### 워크플로우
```
03-1 사전 등록 → 02 형태소 분석 → 00 사전 관리
     ↓               ↓               ↓
  N-gram 기반      전체 텍스트      사전 조회/삭제
  자동 등록         분석 실행        효과 테스트
```

---

## ⚙️ 사전 준비사항

### 1. 필수 환경 설정

#### ✅ R 환경 확인
```r
# R 버전 확인 (4.5.1 권장)
R.version.string

# 작업 디렉토리 확인
getwd()
# 결과: "C:/Users/.../mopheme_test" 로 끝나야 함
```

#### ✅ API 키 설정 (필수)
```bash
# Windows 환경변수 설정 방법 1: 시스템 속성
# 시스템 속성 > 고급 > 환경 변수 > 시스템 변수
# 변수명: BAREUN_API_KEY
# 변수값: [발급받은 API 키]

# Windows 환경변수 설정 방법 2: 명령 프롬프트 (임시)
setx BAREUN_API_KEY "발급받은API키"
```

#### ✅ Bareun API 서버 실행 확인
```bash
# 로컬 서버 상태 확인
# 브라우저에서 http://localhost:5655 접속
# 또는 명령 프롬프트에서
curl http://localhost:5655
```

### 2. 필수 패키지 설치
```r
# 기본 패키지 설치 (자동 설치됨)
install.packages(c("devtools", "curl", "httr", "rjson", "RProtoBuf"))

# Bareun 패키지 설치 (GitHub에서)
devtools::install_github("bareun-nlp/RBareun")

# 기타 분석 패키지
install.packages(c("dplyr", "tidyr", "stringr"))
```

### 3. 데이터 파일 준비
- **위치**: `data/processed/combined_data.rds`
- **형식**: R 데이터프레임 (RDS 형식)
- **필수 컬럼**: 논문ID + 초록텍스트

---

## 🚀 스크립트별 사용 가이드

## 📊 03-1_register_user_dict_auto.R

**목적**: N-gram 분석 결과를 Bareun API에 사용자 사전으로 자동 등록

### 실행 방법
```bash
"C:/Program Files/R/R-4.5.1/bin/Rscript.exe" 03-1_register_user_dict_auto.R
```

### 사전 준비사항
#### ✅ 입력 파일 확인
```
data/dictionaries/dict_candidates/
├── compound_nouns_candidates_YYYYMMDD.csv  # 복합명사 후보
├── proper_nouns_candidates_YYYYMMDD.csv    # 고유명사 후보  
└── 2gram_results_YYYYMMDD.csv             # N-gram 분석 결과
```

#### ✅ CSV 파일 형식 검증
**복합명사/N-gram 파일**:
```csv
ngram,frequency,ngram_size,pos_tag
학습부진,15,2,NNG
교육격차,8,2,NNG
온라인수업,12,2,NNG
```

**고유명사 파일**:
```csv
noun
서울대학교
한국교원대학교
한국교육개발원
```

### 실행 과정

#### 1단계: 환경 점검
```
=== 사용자 사전 자동 등록 시스템 ===
작업 디렉토리: C:/Users/.../mopheme_test
✅ API 키 확인됨
✅ Bareun API 연결 완료 (localhost:5655)
```

#### 2단계: 파일 검색 및 검증
```
========== 편집된 CSV 파일 검색 ==========
✅ 복합명사 사전 파일: compound_nouns_candidates_20250106.csv
✅ 고유명사 사전 파일: proper_nouns_candidates_20250106.csv
```

#### 3단계: 기존 사전 확인
```
========== 기존 등록된 사전 조회 ==========
📚 기존 등록된 사전:
  1. test_dict
  2. compound_dict_20250105
```

#### 4단계: 데이터 로드 및 정제
```
========== 복합명사 데이터 로드 ==========
복합명사 데이터 로드: 450개 항목
원본 데이터: 450개 → 정제된 복합명사: 380개
⚠️ 제거된 항목: 70개 (빈 ngram, 잘못된 frequency, 짧은 단어 등)
```

#### 5단계: 사전 이름 입력 (대화형)
```
📝 사전 이름 입력
📚 기존 등록된 사전 목록:
  1. test_dict
  2. compound_dict_20250105

⚠️ 기존 사전과 같은 이름을 사용하면 덮어쓰기됩니다.

통합 사전 이름을 입력하세요 (기본값: user_dict_20250106): [입력]
```

#### 6단계: 사전 등록 실행
```
========== 통합 사전 (복합명사 + 고유명사) 등록 ==========
📊 사전 구성 요약:
  - 복합명사: 380개
  - 고유명사: 15개  
  - 총 항목: 395개

통합 사전 'user_dict_20250106' 등록 중...
✅ 사전 등록 요청 완료 (raw 응답)
✅ 사전 'user_dict_20250106' 생성 및 등록 완료!
```

### 사용자 입력 가이드

#### 사전 이름 규칙
- **권장 형식**: `user_dict_YYYYMMDD`
- **허용 문자**: 영문, 숫자, 언더바(_)  
- **금지**: 공백, 특수문자, 한글
- **길이**: 3~30자

#### 덮어쓰기 확인
```
⚠️ 기존 사전 'test_dict'가 이미 존재합니다.
기존 사전 'test_dict'를 덮어쓰시겠습니까? (y/n, 기본값: y): n
```

### 주의사항 (필수)

#### ⚠️ 데이터 정제 자동 실행
- 빈 값, 특수문자, 짧은 단어 자동 제거
- 원본 파일 자동 백업 (파일명_backup.csv)
- 정제 통계 실시간 표시

#### ⚠️ CSV 파일 오류 방지
```r
# 올바른 CSV 형식 확인
read.csv("파일명.csv", fileEncoding = "UTF-8")

# 마지막 줄에 빈 줄 추가 (incomplete final line 오류 방지)
# 메모장에서 파일 끝에 Enter 한 번 추가
```

#### ⚠️ API 응답 해석
- `raw(0)` 응답 = 정상 등록 (Bareun API 특성)
- `"업데이트 성공"` 메시지 = 정상 등록
- `NULL` 응답 = 등록 실패

---

## 🔍 02_morpheme_analysis.R  

**목적**: 등록된 사용자 사전을 활용하여 전체 텍스트 데이터 형태소 분석

### 실행 방법
```bash
"C:/Program Files/R/R-4.5.1/bin/Rscript.exe" 02_morpheme_analysis.R
```

### 사전 준비사항

#### ✅ 입력 데이터 확인
- **파일**: `data/processed/combined_data.rds`
- **구조**: data.frame with ID + 텍스트 컬럼
- **크기**: 500~1000개 문서 권장

#### ✅ 메모리 확인
```r
# 메모리 사용량 확인
memory.size()
memory.limit()

# 권장 최소 메모리: 4GB
# 대용량 데이터: 8GB 이상
```

### 실행 과정

#### 1단계: 환경 및 데이터 검증
```
========== 데이터 불러오기 ==========
전체 데이터 행 수: 916

데이터 컬럼명:
 [1] "논문일련번호" "논문명" "영문논문명" "초록" "영문초록" "키워드" 
 [7] "영문키워드" "DOI" "발행기관" "수록잡지" "발행연도" "권" 
[13] "호" "시작페이지" "끝페이지" "전체페이지" "참고문헌수" "source_file"

식별된 컬럼:
논문 ID 컬럼: 논문일련번호
초록 컬럼: 초록
```

#### 2단계: 사용자 사전 선택 (대화형)
```
========== Bareun 사용자 사전 조회 ==========
📚 등록된 Bareun 사용자 사전 발견!
총 3개의 사용자 사전이 등록되어 있습니다.

📋 등록된 사전 목록:
1. test_dict
2. compound_dict_20250105  
3. user_dict_20250106

========== 사전 적용 옵션 선택 ==========
0. 기본 사전만 사용 (사용자 사전 미적용)
1. test_dict 사전 사용
2. compound_dict_20250105 사전 사용
3. user_dict_20250106 사전 사용

사용할 사전을 선택하세요 (기본값: 3): [입력]
```

#### 3단계: 사전 효과 미리보기 (선택)
```
선택된 사전의 내용을 미리보시겠습니까? (y/n, 기본값: n): y

🧪 'user_dict_20250106' 사전 효과 테스트:
📝 테스트 문장으로 사전 효과 확인 중...

📄 테스트 문장: 학습부진 학생들을 위한 연구목적으로 기초학력 향상 프로그램을 실시하였다.
✅ 'user_dict_20250106' 사전이 인식하는 새로운 용어: 학습부진, 연구목적, 기초학력
💡 이 용어들이 실제로 사전에 등록되어 작동하고 있습니다!
```

#### 4단계: 배치 처리 형태소 분석
```
========== 전체 데이터 준비 ==========
전체 분석 대상: 916개 문서
배치 처리 설정: 916개 문서를 19개 배치로 처리

========== 형태소 분석 실행 ==========
✅ 'user_dict_20250106' 사용자 사전 설정 완료

========== 배치 1/19 처리 중 ==========
배치 1: 문서 1~50 (50개 문서)
진행률: 10/916 (1.1%) - 성공: 10, 오류: 0
진행률: 20/916 (2.2%) - 성공: 20, 오류: 0
...
```

#### 5단계: 결과 저장 및 보고서 생성
```
========== 분석 결과 요약 ==========
사용된 사전: 사용자 사전 (user_dict_20250106)
전체 문서 수: 916
처리된 문서 수: 916
성공한 문서 수: 890
오류 발생 문서 수: 26
성공률: 97.2%
```

### 사용자 입력 가이드

#### 사전 선택 옵션
- **0**: 기본 사전만 사용 (빠름, 일반적 결과)
- **1~N**: 특정 사용자 사전 사용 (느림, 정확한 결과)
- **기본값**: compound 포함 사전 우선 선택

#### 미리보기 옵션
- **y**: 사전 내용 확인 (권장, 처음 사용시)
- **n**: 바로 분석 시작 (빠름)

### 출력 파일 구조

#### 생성 파일 목록
```
data/processed/
├── full_morpheme_results_사전명.rds      # 전체 결과 (메타데이터 포함)
├── full_morpheme_analysis_사전명.csv     # 형태소 분석 결과
└── full_noun_extraction_사전명.csv       # 명사 추출 결과

reports/
└── full_morpheme_analysis_report_사전명.md  # 분석 보고서
```

#### CSV 파일 형식
**형태소 분석 결과**:
```csv
doc_id,morpheme_analysis
1,"학습/NNG 부진/NNG 학생/NNG 들/XSN 을/JKO 위하/VV 어/EC"
2,"연구/NNG 목적/NNG 으로/JKB 실시/NNG 하/XSV 였/EP"
```

**명사 추출 결과**:
```csv
doc_id,noun_extraction  
1,"학습부진, 학생, 교육과정, 개별화학습"
2,"연구목적, 기초학력, 향상프로그램, 효과분석"
```

### 주의사항 (필수)

#### ⚠️ 메모리 관리
- 배치 크기: 50개 (기본값, 조정 가능)
- 5배치마다 중간 저장
- 메모리 부족 시 배치 크기 축소

#### ⚠️ 오류 처리
```r
# 일반적 오류 원인
1. API 서버 연결 끊어짐 → API 키 재설정
2. 텍스트 인코딩 문제 → UTF-8 확인  
3. 메모리 부족 → 배치 크기 축소
4. 빈 텍스트 → 데이터 정제 필요
```

#### ⚠️ 성공률 기준
- **95% 이상**: 정상 (일부 빈 텍스트 존재)
- **90~95%**: 주의 (데이터 품질 확인)
- **90% 미만**: 문제 (API/데이터 점검)

---

## 🛠️ 00.bareun_dict_manager.R

**목적**: 등록된 사용자 사전 관리 (조회, 삭제, 테스트)

### 실행 방법
```bash
"C:/Program Files/R/R-4.5.1/bin/Rscript.exe" 00.bareun_dict_manager.R
```

### 메뉴 구성

#### 대화형 메뉴
```
============================================================
🎯 Bareun 사용자 사전 관리 메뉴 (간소화 버전)
============================================================
1. 등록된 사전 목록 보기
2. 사전 삭제  
3. 사전 테스트
4. 종료
------------------------------------------------------------
```

### 1. 등록된 사전 목록 보기

#### 실행 결과
```
📋 등록된 사용자 사전 목록:
--------------------------------------------------
1. test_dict
2. compound_dict_20250105
3. user_dict_20250106
```

#### 사전 정보 확인
- 사전명과 등록 순서
- 총 사전 개수
- 활성화 상태

### 2. 사전 삭제

#### 삭제 프로세스
```
삭제할 사전을 선택하세요:
1. test_dict
2. compound_dict_20250105  
3. user_dict_20250106

삭제할 사전 번호를 선택하세요 (기본값: 1): 2

정말로 'compound_dict_20250105' 사전을 삭제하시겠습니까? (y/n, 기본값: n): y
✅ 사전 'compound_dict_20250105' 삭제 완료
```

#### 안전 장치
- 이중 확인 메시지
- 기본값 'n' (실수 방지)
- 삭제 후 즉시 목록 갱신

### 3. 사전 테스트

#### 테스트 프로세스
```
테스트할 사전을 선택하세요:
1. test_dict
2. user_dict_20250106

테스트할 사전 번호를 선택하세요 (기본값: 1): 2

🧪 'user_dict_20250106' 사전 효과 테스트:
--------------------------------------------------
📝 테스트 문장으로 사전 효과 확인 중...

📄 문장 1: 학습부진 학생들을 위한 교육과정을 개발하였다.
  ✅ 새로 인식된 용어: 학습부진, 교육과정

📄 문장 2: 연구목적으로 기초학력 향상 프로그램을 실시하였다.  
  ✅ 새로 인식된 용어: 연구목적, 기초학력
```

#### 테스트 문장 (자동)
```r
test_sentences <- c(
  "학습부진 학생들을 위한 교육과정을 개발하였다.",
  "연구목적으로 기초학력 향상 프로그램을 실시하였다.", 
  "개별화학습과 맞춤형교육의 효과를 분석하였다.",
  "서울대학교와 한국교원대학교에서 공동연구를 수행하였다.",
  "온라인수업과 블렌디드러닝 방법을 적용하였다."
)
```

### 사용자 입력 가이드

#### 메뉴 선택
- **1**: 목록 보기 (안전, 언제나 사용 가능)
- **2**: 삭제 (주의, 복구 불가)
- **3**: 테스트 (권장, 사전 효과 확인)
- **4**: 종료

#### 삭제 시 주의사항
```
⚠️ 삭제된 사전은 복구할 수 없습니다.
⚠️ 형태소 분석에 사용 중인 사전 삭제 시 오류 발생
⚠️ 삭제 전 반드시 테스트로 올바른 사전인지 확인
```

### 주의사항 (필수)

#### ⚠️ 사전 조회 제한
```r
# Bareun API 제한사항
# - 직접 사전 내용 조회 불가능한 경우 多
# - 효과 테스트로 우회 확인
# - "domain name not match" 오류 정상
```

#### ⚠️ 삭제 복구 불가
- 삭제된 사전은 영구 삭제
- 재등록 시 03-1 스크립트 다시 실행
- 중요 사전은 삭제 전 백업 권장

---

## ⚠️ 필수 준수사항

### 1. API 연결 필수 확인사항

#### 환경변수 설정 검증
```bash
# Windows 명령 프롬프트에서 확인
echo %BAREUN_API_KEY%
# 결과: API 키가 출력되어야 함 (빈 값이면 설정 필요)
```

#### API 서버 상태 확인
```bash
# 서버 응답 확인
curl http://localhost:5655
# 또는 브라우저에서 localhost:5655 접속
# 응답이 있어야 함 (연결 거부되면 서버 실행 필요)
```

#### R에서 API 테스트
```r
# API 연결 테스트
API_KEY <- Sys.getenv("BAREUN_API_KEY")
if (API_KEY != "") {
  library(bareun)
  set_api(API_KEY, "localhost", 5655)
  
  # 간단한 테스트
  result <- tagger("안녕하세요")
  if (!is.null(result)) {
    cat("✅ API 연결 정상\n")
  } else {
    cat("❌ API 연결 실패\n")
  }
}
```

### 2. 실행 순서 준수

#### 권장 실행 순서
```
1. 03-1_register_user_dict_auto.R  (사전 등록)
2. 02_morpheme_analysis.R          (형태소 분석)  
3. 00.bareun_dict_manager.R        (사전 관리)
```

#### 순서 위반 시 문제점
- 02 먼저 실행: 사용자 사전 없어 기본 사전만 사용
- 00 먼저 실행: 관리할 사전 없어 빈 목록
- 03-1 반복 실행: 중복 사전 생성 또는 덮어쓰기

### 3. 파일 경로 및 명명 규칙

#### 필수 폴더 구조
```
mopheme_test/
├── data/
│   ├── processed/
│   │   └── combined_data.rds           # 필수 입력 데이터
│   └── dictionaries/
│       └── dict_candidates/            # 사전 후보 파일들
├── reports/                            # 보고서 출력 폴더
└── [스크립트들]
```

#### 파일명 규칙 (자동 생성)
- 사전명: `user_dict_YYYYMMDD` (날짜 포함)
- 결과파일: `파일명_사전명.확장자` (사전명 포함)
- 백업파일: `원본파일명_backup.확장자` (자동 백업)

### 4. 메모리 및 성능 최적화

#### 메모리 사용량 가이드라인
```r
# 문서 수별 권장 메모리
#   ~500개: 4GB
#  500~1000개: 8GB  
# 1000~2000개: 16GB
# 2000개 이상: 32GB
```

#### 배치 크기 조정
```r
# 02_morpheme_analysis.R에서 수정
BATCH_SIZE <- 50  # 기본값

# 메모리 부족 시
BATCH_SIZE <- 25  # 절반으로 축소

# 고성능 환경
BATCH_SIZE <- 100 # 2배로 증가
```

### 5. 데이터 품질 확인

#### 입력 데이터 검증
```r
# combined_data.rds 품질 확인
data <- readRDS("data/processed/combined_data.rds")

# 필수 확인사항
nrow(data)                    # 행 수 (500개 이상 권장)
sum(is.na(data$초록))         # 빈 텍스트 개수 (10% 이하)
mean(nchar(data$초록), na.rm=T) # 평균 텍스트 길이 (100자 이상)
```

#### CSV 사전 파일 검증
```r
# N-gram 결과 파일 확인
csv_data <- read.csv("파일경로", fileEncoding="UTF-8")

# 필수 확인사항  
all(c("ngram", "frequency") %in% names(csv_data))  # 필수 컬럼
sum(is.na(csv_data$ngram))                         # 빈 값 (0개)
min(csv_data$frequency, na.rm=T)                   # 최소 빈도 (1 이상)
```

---

## 🔧 오류 해결 가이드

### 1. API 연결 오류

#### 오류: "BAREUN_API_KEY 환경변수가 설정되지 않았습니다"
```bash
# 해결방법 1: 시스템 환경변수 설정
# Windows: 시스템 속성 > 고급 > 환경 변수 > 시스템 변수
# 변수명: BAREUN_API_KEY  
# 변수값: [발급받은 API 키]

# 해결방법 2: R에서 임시 설정
Sys.setenv(BAREUN_API_KEY = "발급받은API키")

# 설정 확인
Sys.getenv("BAREUN_API_KEY")
```

#### 오류: "Bareun API 연결 실패"
```bash
# 원인 1: API 서버 미실행
# 해결: Bareun API 서버 실행 확인
curl http://localhost:5655

# 원인 2: 포트 번호 불일치  
# 해결: 포트 번호 확인 (기본값: 5655)
netstat -an | find "5655"

# 원인 3: 방화벽 차단
# 해결: Windows 방화벽에서 포트 5655 허용
```

#### 오류: "API 키가 올바르지 않습니다"
```r
# 원인: 잘못된 API 키
# 해결: Bareun에서 발급받은 정확한 키 확인
# 주의: API 키에 공백이나 특수문자 포함 금지
```

### 2. 데이터 관련 오류

#### 오류: "분석할 유효한 데이터가 없습니다"
```r
# 원인 확인
data <- readRDS("data/processed/combined_data.rds")
str(data)                           # 데이터 구조
sum(is.na(data$초록))              # 빈 초록 개수
nchar_lengths <- nchar(data$초록)   # 텍스트 길이
summary(nchar_lengths)             # 길이 분포

# 해결방법
# 1. 초록 컬럼명 확인 (대소문자, 띄어쓰기)
names(data)
# 2. 최소 길이 조건 완화 (10글자 → 5글자)
# 3. 데이터 전처리 다시 실행
```

#### 오류: "CSV 파일 읽기 오류"
```r
# 원인 1: 인코딩 문제
# 해결: UTF-8으로 저장 확인
read.csv("파일명", fileEncoding="UTF-8")

# 원인 2: 파일 경로 오류
# 해결: 절대 경로 사용
file.exists("절대경로/파일명.csv")

# 원인 3: CSV 형식 오류
# 해결: Excel에서 "CSV UTF-8" 형식으로 저장
```

### 3. 메모리 관련 오류

#### 오류: "Memory allocation error"
```r
# 해결방법 1: 메모리 확인 및 정리
memory.size()     # 현재 사용량
memory.limit()    # 제한값
gc()              # 가비지 컬렉션

# 해결방법 2: 배치 크기 축소
BATCH_SIZE <- 25  # 02_morpheme_analysis.R에서

# 해결방법 3: R 재시작
# RStudio: Session > Restart R
```

#### 오류: "벡터 크기 제한 초과"
```r
# 해결방법: 대용량 데이터 분할 처리
total_docs <- nrow(data)
chunk_size <- 500

for (i in seq(1, total_docs, chunk_size)) {
  end_idx <- min(i + chunk_size - 1, total_docs)
  chunk_data <- data[i:end_idx, ]
  # 처리 로직
}
```

### 4. 사전 등록 오류

#### 오류: "사전 등록 결과가 NULL입니다"
```r
# 원인 1: API 연결 불안정
# 해결: API 연결 재확인
set_api(API_KEY, "localhost", 5655)

# 원인 2: 사전 데이터 오류
# 해결: 데이터 정제 확인
compound_nouns <- compound_nouns[!is.na(compound_nouns)]
compound_nouns <- compound_nouns[nchar(compound_nouns) >= 2]

# 원인 3: 매개변수 오류
# 해결: 매개변수 타입 확인
if(length(compound_nouns) == 0) compound_nouns <- character(0)
```

#### 오류: "domain name not match"
```r
# 이는 정상 오류 (Bareun API 특성)
# 직접 사전 내용 조회 불가능
# 효과 테스트로 우회 확인

# 해결방법: show_dict_effectiveness() 함수 사용
# 테스트 문장으로 사전 등록 효과 확인
```

### 5. 형태소 분석 오류

#### 오류: "tagger 생성 실패"
```r
# 원인: domain 매개변수 오류
# 해결: 등록된 사전명 정확히 입력
dict_list_result <- dict_list(tagger(""))
print(dict_list_result)  # 정확한 사전명 확인

# 올바른 사용법
t <- tagger(apikey = API_KEY, domain = "정확한사전명")
```

#### 오류: "pos 함수 실행 실패"
```r
# 원인 1: 텍스트 형식 오류
# 해결: 문자열 변환 및 정제
text <- as.character(text)
text <- trimws(text)

# 원인 2: 특수문자 포함
# 해결: 특수문자 제거
text <- gsub("[^\uAC00-\uD7A3a-zA-Z0-9\\s]", "", text)

# 원인 3: 빈 텍스트
# 해결: 빈 값 필터링
if(nchar(text) > 0) {
  result <- pos(tagger_obj, text)
}
```

---

## ❓ FAQ

### Q1. 사전 등록 후 효과가 없는 것 같습니다.

**A**: 다음 사항을 확인해주세요.

1. **사전 등록 확인**
   ```r
   t <- tagger("")
   dict_list(t)  # 등록된 사전 목록에 있는지 확인
   ```

2. **domain 매개변수 정확히 사용**
   ```r
   # 올바른 방법
   t <- tagger(text, domain = "등록한사전명")
   
   # 잘못된 방법  
   t <- tagger(text)  # 기본 사전만 사용
   ```

3. **테스트 문장으로 효과 확인**
   ```r
   # 기본 사전
   t1 <- tagger("학습부진 학생들")
   nouns1 <- nouns(t1)
   
   # 사용자 사전
   t2 <- tagger("학습부진 학생들", domain = "사전명")
   nouns2 <- nouns(t2)
   
   # 차이점 확인
   setdiff(nouns2[[1]], nouns1[[1]])
   ```

### Q2. CSV 파일에서 한글이 깨집니다.

**A**: 인코딩 문제입니다. 다음과 같이 해결하세요.

1. **R에서 읽을 때**
   ```r
   data <- read.csv("파일명.csv", fileEncoding="UTF-8")
   ```

2. **Excel에서 저장할 때**
   - 파일 → 다른 이름으로 저장
   - 파일 형식: "CSV UTF-8 (쉼표로 분리)"

3. **메모장에서 확인**
   - 파일 → 다른 이름으로 저장
   - 인코딩: UTF-8

### Q3. 메모리가 부족하다는 오류가 발생합니다.

**A**: 다음 방법으로 해결하세요.

1. **메모리 확인**
   ```r
   memory.size()      # 현재 사용량 (MB)
   memory.limit()     # 최대 제한값 (MB)
   ```

2. **배치 크기 축소**
   ```r
   # 02_morpheme_analysis.R에서
   BATCH_SIZE <- 25   # 기본값 50에서 축소
   ```

3. **불필요한 객체 제거**
   ```r
   rm(list = ls())    # 모든 객체 제거
   gc()               # 가비지 컬렉션
   ```

4. **R 재시작**
   - RStudio: Session → Restart R

### Q4. 어떤 사전을 만들어야 좋을까요?

**A**: 프로젝트 목적에 따라 다릅니다.

1. **교육학 연구**
   ```
   복합명사: 학습부진, 교육격차, 기초학력, 맞춤형교육
   고유명사: 서울대학교, 한국교육개발원, 교육부
   ```

2. **일반적인 학술 논문**
   ```
   복합명사: 연구목적, 실험집단, 통계분석, 유의미한
   고유명사: 대학명, 연구기관명, 지역명
   ```

3. **사전 크기 권장**
   - 복합명사: 100~500개 (너무 많으면 과적합)
   - 고유명사: 20~100개 (명확한 것만)

### Q5. 분석 속도가 너무 느립니다.

**A**: 다음과 같이 최적화하세요.

1. **배치 크기 증가** (메모리 여유 시)
   ```r
   BATCH_SIZE <- 100  # 기본값 50에서 증가
   ```

2. **불필요한 분석 생략**
   ```r
   # 사전 미리보기 생략
   if (get_yes_no_input("사전 내용 미리보기", "n"))  # 기본값 n
   ```

3. **결과 파일 형식 선택**
   ```r
   # CSV 저장 생략 (RDS만 저장)
   # write.csv 라인 주석 처리
   ```

4. **텍스트 길이 제한**
   ```r
   # 너무 긴 텍스트 자르기
   text <- substr(text, 1, 1000)  # 1000자 제한
   ```

### Q6. 사전을 삭제했는데 복구할 수 있나요?

**A**: 불가능합니다. 다음과 같이 재생성하세요.

1. **백업 파일 확인**
   ```
   data/dictionaries/dict_candidates/
   ├── compound_nouns_candidates_백업날짜.csv
   └── proper_nouns_candidates_백업날짜.csv
   ```

2. **03-1 스크립트 다시 실행**
   ```bash
   "C:/Program Files/R/R-4.5.1/bin/Rscript.exe" 03-1_register_user_dict_auto.R
   ```

3. **예방책: 중요 사전 백업**
   ```r
   # 사전 효과 테스트 결과를 텍스트로 저장
   # 00.bareun_dict_manager.R의 테스트 기능 활용
   ```

---

## 📞 지원 및 문의

### 🔗 참고 자료
- **Bareun GitHub**: https://github.com/bareun-nlp/RBareun
- **공식 문서**: bareun-nlp.com
- **샘플 코드**: GitHub의 samples 폴더

### 🐛 문제 신고
프로젝트 관련 문제나 개선사항은 다음과 같이 신고해주세요.

1. **오류 로그 수집**
   - R 콘솔의 전체 출력 복사
   - 사용된 스크립트명과 실행 시점

2. **환경 정보 수집**
   ```r
   sessionInfo()          # R 버전 및 패키지 정보
   Sys.info()            # 운영체제 정보  
   memory.size()         # 메모리 사용량
   ```

3. **재현 단계 기록**
   - 어떤 순서로 실행했는지
   - 어떤 입력을 했는지
   - 언제 오류가 발생했는지

---

**📅 매뉴얼 버전**: v1.0 (2025-08-07)  
**✅ 최종 검증**: Windows 10, R 4.5.1, Bareun API v2.x  
**📝 업데이트**: 사용자 피드백 및 오류 보고서 기반으로 지속 업데이트